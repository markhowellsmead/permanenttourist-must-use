(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor,a=window.wp.components,l=window.wp.data,s=window.wp.i18n,n=e=>{let{props:t}=e;const{classNameBase:a,postId:l,pageData:s,imageSize:n,focalPoint:i}=t;if(l&&s&&s?.featured_image?.media_details?.sizes[n]?.source_url){const e=i?`${100*i.x}% ${100*i.y}%`:"center center";return React.createElement("figure",{className:`${a}__figure`},React.createElement("img",{style:{objectPosition:e},className:`${a}__image`,src:s.featured_image.media_details.sizes[n].source_url,alt:s.featured_image.alt_text||"",width:s.featured_image.media_details.sizes[n].width,height:s.featured_image.media_details.sizes[n].height}))}return React.createElement(React.Fragment,null)},i=JSON.parse('{"name":"sht/page-teaser-cover"}'),{name:c}=i,o=(0,e.getBlockDefaultClassName)(c);(0,e.registerBlockType)(c,{edit:e=>{const{attributes:i,setAttributes:c}=e,{aspectRatioMobile:p,aspectRatioTablet:r,aspectRatioDesktop:d,focalPoint:g,imageSize:m,linkText:u,postId:R,style:_}=i,[b,h]=(0,t.useSettings)("dimensions.aspectRatios.default","dimensions.aspectRatios.theme"),f=[...b||[],...h||[]].map((e=>({value:e.ratio,label:e.name}))),w=(e=>{const t={};if(e?.spacing?.blockGap)if(-1!==e.spacing.blockGap.indexOf("var:preset")){const a=e.spacing.blockGap.split("|")[2];t["--wp--style--block-gap"]="var(--wp--preset--spacing--"+a+")"}else t["--wp--style--block-gap"]=e.spacing.blockGap;return t})(_),E=(e=>{const t={};if(e?.spacing?.padding){if(e?.spacing?.padding?.top)if(-1!==e?.spacing?.padding?.top.indexOf("var:preset")){const a=e.spacing.padding.top.split("|")[2];t.paddingTop="var(--wp--preset--spacing--"+a+")"}else t.paddingTop=e.spacing.padding.top;if(e?.spacing?.padding?.right)if(-1!==e?.spacing?.padding?.right.indexOf("var:preset")){const a=e.spacing.padding.right.split("|")[2];t.paddingRight="var(--wp--preset--spacing--"+a+")"}else t.paddingRight=e.spacing.padding.right;if(e?.spacing?.padding?.bottom)if(-1!==e?.spacing?.padding?.bottom.indexOf("var:preset")){const a=e.spacing.padding.bottom.split("|")[2];t.paddingBottom="var(--wp--preset--spacing--"+a+")"}else t.paddingBottom=e.spacing.padding.bottom;if(e?.spacing?.padding?.left)if(-1!==e?.spacing?.padding?.left.indexOf("var:preset")){const a=e.spacing.padding.left.split("|")[2];t.paddingLeft="var(--wp--preset--spacing--"+a+")"}else t.paddingLeft=e.spacing.padding.left}return t})(_),k=(e=>{const t={};return e?.aspectRatioMobile&&(t["--sht-teaser-cover-aspect-ratio"]=e.aspectRatioMobile),e?.aspectRatioTablet&&(t["--sht-teaser-cover-aspect-ratio--tablet"]=e.aspectRatioTablet),e?.aspectRatioDesktop&&(t["--sht-teaser-cover-aspect-ratio--desktop"]=e.aspectRatioDesktop),t})(i);console.log("outerStyles",k);const v=(0,t.useBlockProps)({style:k}),S=(0,l.useSelect)((e=>e("core").getEntityRecord("postType","page",R))),x=(0,l.useSelect)((e=>e("core/editor").getEditorSettings().imageSizes)),y=(0,l.useSelect)((e=>e("core").getEntityRecords("postType","page",{per_page:-1,order:"asc",orderby:"title"}))),C=[{label:"Select a page",value:0}];return y?.length&&y.forEach((e=>{C.push({label:e.title.rendered,value:e.id})})),React.createElement(React.Fragment,null,React.createElement(t.InspectorControls,null,React.createElement(a.PanelBody,{title:(0,s._x)("Settings","Block settings","pt-must-use")},React.createElement(a.PanelRow,null,!y?.length&&React.createElement(a.Spinner,null),!!y?.length&&React.createElement(a.SelectControl,{label:(0,s._x)("Choose page","Block setting","pt-must-use"),value:R,options:C,onChange:e=>c({postId:e})})),!!x?.length&&React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Image size","Block setting","pt-must-use"),value:m,options:x.map((e=>({label:e.name,value:e.slug}))),onChange:e=>c({imageSize:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Aspect ratio (Desktop)","SelectControl label","pt-must-use"),value:d,options:f,onChange:e=>c({aspectRatioDesktop:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Aspect ratio (Tablet)","SelectControl label","pt-must-use"),value:r,options:f,onChange:e=>c({aspectRatioTablet:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Aspect ratio (Mobile)","SelectControl label","pt-must-use"),value:p,options:f,onChange:e=>c({aspectRatioMobile:e})})),R&&S&&S?.featured_image?.media_details?.sizes[m]?.source_url&&React.createElement(a.PanelRow,null,React.createElement(a.FocalPointPicker,{label:(0,s._x)("Image focal point","Block setting","pt-must-use"),url:S.featured_image.media_details.sizes[m].source_url,value:g,onChange:e=>c({focalPoint:e})})))),React.createElement("div",v,!R&&React.createElement("div",{className:"c-editormessage"},(0,s._x)("No page selected","Block placeholder","pt-must-use")),!!R&&!S&&React.createElement("div",{className:"c-editormessage"},React.createElement("div",{className:"c-editormessage__row"},React.createElement(a.Spinner,null),React.createElement("span",null,(0,s._x)("Loading page data...","Block placeholder","pt-must-use")))),S&&React.createElement("div",{className:`${o}__inner`,style:w},React.createElement("div",{className:`${o}__content`,style:E},React.createElement("h2",{className:`${o}__title`},S.title.rendered),S.excerpt.rendered&&React.createElement("div",{className:`${o}__excerpt`,dangerouslySetInnerHTML:{__html:S.excerpt.rendered}}),React.createElement("div",{className:`${o}__link-wrapper wp-block-button is-style-with-arrow-right has-smaller-font-size`},React.createElement(t.RichText,{placeholder:(0,s._x)("Add link textâ€¦","Block placeholder","pt-must-use"),tagName:"div",className:`${o}__link wp-block-button__link has-transparent-background-color has-background wp-element-button`,value:u,onChange:e=>c({linkText:e})}))),React.createElement(n,{props:{classNameBase:o,postId:R,pageData:S,imageSize:m,focalPoint:g}}))))}})})();
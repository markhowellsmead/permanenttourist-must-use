(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor,a=window.wp.components,n=window.wp.data,s=window.wp.i18n,i=e=>{let{props:t}=e;const{classNameBase:a,postId:n,pageData:s,imageSize:i,focalPoint:l}=t;if(n&&s&&s?.featured_image?.media_details?.sizes[i]?.source_url){const e=l?`${100*l.x}% ${100*l.y}%`:"center center";return React.createElement("figure",{className:`${a}__figure`},React.createElement("img",{style:{objectPosition:e},className:`${a}__image`,src:s.featured_image.media_details.sizes[i].source_url,alt:s.featured_image.alt_text||"",width:s.featured_image.media_details.sizes[i].width,height:s.featured_image.media_details.sizes[i].height}))}return React.createElement(React.Fragment,null)},l=JSON.parse('{"name":"sht/page-teaser-cover"}'),{name:c}=l,r=(0,e.getBlockDefaultClassName)(c);(0,e.registerBlockType)(c,{edit:e=>{const l=(0,t.useBlockProps)(),{attributes:c,setAttributes:p}=e,{focalPoint:o,imageSize:d,linkText:g,postId:m,style:u}=c,_=(e=>{const t={};if(e?.spacing?.blockGap)if(-1!==e.spacing.blockGap.indexOf("var:preset")){const a=e.spacing.blockGap.split("|")[2];t["--wp--style--block-gap"]="var(--wp--preset--spacing--"+a+")"}else t["--wp--style--block-gap"]=e.spacing.blockGap;return t})(u),f=(e=>{const t={};if(e?.spacing?.padding){if(e?.spacing?.padding?.top)if(-1!==e?.spacing?.padding?.top.indexOf("var:preset")){const a=e.spacing.padding.top.split("|")[2];t.paddingTop="var(--wp--preset--spacing--"+a+")"}else t.paddingTop=e.spacing.padding.top;if(e?.spacing?.padding?.right)if(-1!==e?.spacing?.padding?.right.indexOf("var:preset")){const a=e.spacing.padding.right.split("|")[2];t.paddingRight="var(--wp--preset--spacing--"+a+")"}else t.paddingRight=e.spacing.padding.right;if(e?.spacing?.padding?.bottom)if(-1!==e?.spacing?.padding?.bottom.indexOf("var:preset")){const a=e.spacing.padding.bottom.split("|")[2];t.paddingBottom="var(--wp--preset--spacing--"+a+")"}else t.paddingBottom=e.spacing.padding.bottom;if(e?.spacing?.padding?.left)if(-1!==e?.spacing?.padding?.left.indexOf("var:preset")){const a=e.spacing.padding.left.split("|")[2];t.paddingLeft="var(--wp--preset--spacing--"+a+")"}else t.paddingLeft=e.spacing.padding.left}return t})(u),h=(0,n.useSelect)((e=>e("core").getEntityRecord("postType","page",m))),R=(0,n.useSelect)((e=>e("core/editor").getEditorSettings().imageSizes)),w=(0,n.useSelect)((e=>e("core").getEntityRecords("postType","page",{per_page:-1,order:"asc",orderby:"title"}))),E=[{label:"Select a page",value:0}];return w?.length&&w.forEach((e=>{E.push({label:e.title.rendered,value:e.id})})),React.createElement(React.Fragment,null,React.createElement(t.InspectorControls,null,React.createElement(a.PanelBody,{title:(0,s._x)("Settings","Block settings","pt-must-use")},React.createElement(a.PanelRow,null,!w?.length&&React.createElement(a.Spinner,null),!!w?.length&&React.createElement(a.SelectControl,{label:(0,s._x)("Choose page","Block setting","pt-must-use"),value:m,options:E,onChange:e=>p({postId:e})})),!!R?.length&&React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Image size","Block setting","pt-must-use"),value:d,options:R.map((e=>({label:e.name,value:e.slug}))),onChange:e=>p({imageSize:e})})),m&&h&&h?.featured_image?.media_details?.sizes[d]?.source_url&&React.createElement(a.PanelRow,null,React.createElement(a.FocalPointPicker,{label:(0,s._x)("Image focal point","Block setting","pt-must-use"),url:h.featured_image.media_details.sizes[d].source_url,value:o,onChange:e=>p({focalPoint:e})})))),React.createElement("div",l,!m&&React.createElement("div",{className:"c-editormessage"},(0,s._x)("No page selected","Block placeholder","pt-must-use")),!!m&&!h&&React.createElement("div",{className:"c-editormessage"},React.createElement("div",{className:"c-editormessage__row"},React.createElement(a.Spinner,null),React.createElement("span",null,(0,s._x)("Loading page data...","Block placeholder","pt-must-use")))),h&&React.createElement("div",{className:`${r}__inner`,style:_},React.createElement("div",{className:`${r}__content`,style:f},React.createElement("h2",{className:`${r}__title`},h.title.rendered),h.excerpt.rendered&&React.createElement("div",{className:`${r}__excerpt`,dangerouslySetInnerHTML:{__html:h.excerpt.rendered}}),React.createElement("div",{className:`${r}__link-wrapper wp-block-button is-style-with-arrow-right has-smaller-font-size`},React.createElement(t.RichText,{placeholder:(0,s._x)("Add link textâ€¦","Block placeholder","pt-must-use"),tagName:"div",className:`${r}__link wp-block-button__link has-transparent-background-color has-background wp-element-button`,value:g,onChange:e=>p({linkText:e})}))),React.createElement(i,{props:{classNameBase:r,postId:m,pageData:h,imageSize:d,focalPoint:o}}))))}})})();
(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor,a=window.wp.components,s=window.wp.data,l=window.wp.i18n,n=({props:e})=>{const{classNameBase:t,postId:a,pageData:s,imageSize:l,focalPoint:n}=e;if(a&&s&&s?.featured_image?.media_details?.sizes[l]?.source_url){const e=n?`${100*n.x}% ${100*n.y}%`:"center center";return React.createElement("figure",{className:`${t}__figure`},React.createElement("img",{style:{objectPosition:e},className:`${t}__image`,src:s.featured_image.media_details.sizes[l].source_url,alt:s.featured_image.alt_text||"",width:s.featured_image.media_details.sizes[l].width,height:s.featured_image.media_details.sizes[l].height}))}return React.createElement("figure",{className:`${t}__figure ${t}__figure--empty`})},o=JSON.parse('{"UU":"sht/page-teaser-cover"}'),{UU:c}=o,i=(0,e.getBlockDefaultClassName)(c);(0,e.registerBlockType)(c,{edit:e=>{const{attributes:o,setAttributes:c}=e,{aspectRatioMobile:r,aspectRatioTablet:p,aspectRatioDesktop:g,aspectRatioLargeDesktop:d,aspectRatioXLargeDesktop:m,focalPoint:u,imageSize:R,innerConstraint:_,linkText:b,postId:h,style:k}=o,[f,E]=(0,t.useSettings)("dimensions.aspectRatios.default","dimensions.aspectRatios.theme"),w=[...f||[],...E||[]].map(e=>({value:e.ratio,label:e.name})),v=(e=>{const t={};if(e?.spacing?.blockGap)if(-1!==e.spacing.blockGap.indexOf("var:preset")){const a=e.spacing.blockGap.split("|")[2];t["--wp--style--block-gap"]="var(--wp--preset--spacing--"+a+")"}else t["--wp--style--block-gap"]=e.spacing.blockGap;return t})(k),C=(e=>{const t={};if(e?.spacing?.padding){if(e?.spacing?.padding?.top)if(-1!==e?.spacing?.padding?.top.indexOf("var:preset")){const a=e.spacing.padding.top.split("|")[2];t.paddingTop="var(--wp--preset--spacing--"+a+")"}else t.paddingTop=e.spacing.padding.top;if(e?.spacing?.padding?.right)if(-1!==e?.spacing?.padding?.right.indexOf("var:preset")){const a=e.spacing.padding.right.split("|")[2];t.paddingRight="var(--wp--preset--spacing--"+a+")"}else t.paddingRight=e.spacing.padding.right;if(e?.spacing?.padding?.bottom)if(-1!==e?.spacing?.padding?.bottom.indexOf("var:preset")){const a=e.spacing.padding.bottom.split("|")[2];t.paddingBottom="var(--wp--preset--spacing--"+a+")"}else t.paddingBottom=e.spacing.padding.bottom;if(e?.spacing?.padding?.left)if(-1!==e?.spacing?.padding?.left.indexOf("var:preset")){const a=e.spacing.padding.left.split("|")[2];t.paddingLeft="var(--wp--preset--spacing--"+a+")"}else t.paddingLeft=e.spacing.padding.left}return t})(k),x=(e=>{const t={};return e?.aspectRatioMobile&&(t["--sht-teaser-cover-aspect-ratio"]=e.aspectRatioMobile),e?.aspectRatioTablet&&(t["--sht-teaser-cover-aspect-ratio--tablet"]=e.aspectRatioTablet),e?.aspectRatioDesktop&&(t["--sht-teaser-cover-aspect-ratio--desktop"]=e.aspectRatioDesktop),e?.aspectRatioLargeDesktop&&(t["--sht-teaser-cover-aspect-ratio--large-desktop"]=e.aspectRatioLargeDesktop),e?.aspectRatioXLargeDesktop&&(t["--sht-teaser-cover-aspect-ratio--xlarge-desktop"]=e.aspectRatioXLargeDesktop),t})(o),S=(0,t.useBlockProps)({style:x,className:_?"is-style-inner-constraint":""}),y=(0,s.useSelect)(e=>e("core").getEntityRecord("postType","page",h)),N=(0,s.useSelect)(e=>e("core/editor").getEditorSettings().imageSizes),P=(0,s.useSelect)(e=>e("core").getEntityRecords("postType","page",{per_page:-1,order:"asc",orderby:"title"})),B=[{label:"Select a page",value:0}];return P?.length&&P.forEach(e=>{B.push({label:e.title.rendered,value:e.id})}),React.createElement(React.Fragment,null,React.createElement(t.InspectorControls,null,React.createElement(a.PanelBody,{title:(0,l._x)("Settings","Block settings","pt-must-use")},React.createElement(a.PanelRow,null,!P?.length&&React.createElement(a.Spinner,null),!!P?.length&&React.createElement(a.SelectControl,{label:(0,l._x)("Choose page","Block setting","pt-must-use"),value:h,options:B,onChange:e=>c({postId:e})})),React.createElement(a.PanelRow,null,React.createElement(a.ToggleControl,{label:(0,l._x)("Constrain content width","Block setting","pt-must-use"),checked:!!_,onChange:()=>c({innerConstraint:!_})})),!!N?.length&&React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,l._x)("Image size","Block setting","pt-must-use"),value:R,options:N.map(e=>({label:e.name,value:e.slug})),onChange:e=>c({imageSize:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,l._x)("Aspect ratio (XL)","SelectControl label","pt-must-use"),value:m,options:w,onChange:e=>c({aspectRatioXLargeDesktop:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,l._x)("Aspect ratio (L)","SelectControl label","pt-must-use"),value:d,options:w,onChange:e=>c({aspectRatioLargeDesktop:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,l._x)("Aspect ratio (Desktop)","SelectControl label","pt-must-use"),value:g,options:w,onChange:e=>c({aspectRatioDesktop:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,l._x)("Aspect ratio (Tablet)","SelectControl label","pt-must-use"),value:p,options:w,onChange:e=>c({aspectRatioTablet:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,l._x)("Aspect ratio (Mobile)","SelectControl label","pt-must-use"),value:r,options:w,onChange:e=>c({aspectRatioMobile:e})})),h&&y&&y?.featured_image?.media_details?.sizes[R]?.source_url&&React.createElement(a.PanelRow,null,React.createElement(a.FocalPointPicker,{label:(0,l._x)("Image focal point","Block setting","pt-must-use"),url:y.featured_image.media_details.sizes[R].source_url,value:u,onChange:e=>c({focalPoint:e})})))),React.createElement("div",S,!h&&React.createElement("div",{className:"c-editormessage"},(0,l._x)("No page selected","Block placeholder","pt-must-use")),!!h&&!y&&React.createElement("div",{className:"c-editormessage"},React.createElement("div",{className:"c-editormessage__row"},React.createElement(a.Spinner,null),React.createElement("span",null,(0,l._x)("Loading page data...","Block placeholder","pt-must-use")))),y&&React.createElement("div",{className:`${i}__inner`,style:v},React.createElement("div",{className:`${i}__content`,style:C},React.createElement("h2",{className:`${i}__title`},y.title.rendered),y.excerpt.rendered&&React.createElement("div",{className:`${i}__excerpt`,dangerouslySetInnerHTML:{__html:y.excerpt.rendered}}),React.createElement("div",{className:`${i}__link-wrapper wp-block-button is-style-with-arrow-right has-smaller-font-size`},React.createElement(t.RichText,{placeholder:(0,l._x)("Add link textâ€¦","Block placeholder","pt-must-use"),tagName:"div",className:`${i}__link wp-block-button__link has-transparent-background-color has-background wp-element-button`,value:b,onChange:e=>c({linkText:e})}))),React.createElement(n,{props:{classNameBase:i,postId:h,pageData:y,imageSize:R,focalPoint:u}}))))}})})();
(()=>{"use strict";const e=window.wp.blocks,t=window.wp.blockEditor,a=window.wp.components,l=window.wp.data,s=window.wp.i18n,n=({props:e})=>{const{classNameBase:t,postId:a,pageData:l,imageSize:s,focalPoint:n}=e;if(a&&l&&l?.featured_image?.media_details?.sizes[s]?.source_url){const e=n?`${100*n.x}% ${100*n.y}%`:"center center";return React.createElement("figure",{className:`${t}__figure`},React.createElement("img",{style:{objectPosition:e},className:`${t}__image`,src:l.featured_image.media_details.sizes[s].source_url,alt:l.featured_image.alt_text||"",width:l.featured_image.media_details.sizes[s].width,height:l.featured_image.media_details.sizes[s].height}))}return React.createElement("figure",{className:`${t}__figure ${t}__figure--empty`})},o=JSON.parse('{"UU":"sht/page-teaser-cover"}'),{UU:c}=o,i=(0,e.getBlockDefaultClassName)(c);(0,e.registerBlockType)(c,{edit:e=>{const{attributes:o,setAttributes:c}=e,{aspectRatioMobile:p,aspectRatioTablet:r,aspectRatioLaptop:g,aspectRatioDesktop:d,aspectRatioLargeDesktop:m,aspectRatioXLargeDesktop:u,focalPoint:R,imageSize:_,innerConstraint:b,linkText:h,postId:k,style:E}=o,[f,w]=(0,t.useSettings)("dimensions.aspectRatios.default","dimensions.aspectRatios.theme"),v=[...f||[],...w||[]].map(e=>({value:e.ratio,label:e.name})),C=(e=>{const t={};if(e?.spacing?.blockGap)if(-1!==e.spacing.blockGap.indexOf("var:preset")){const a=e.spacing.blockGap.split("|")[2];t["--wp--style--block-gap"]="var(--wp--preset--spacing--"+a+")"}else t["--wp--style--block-gap"]=e.spacing.blockGap;return t})(E),S=(e=>{const t={};if(e?.spacing?.padding){if(e?.spacing?.padding?.top)if(-1!==e?.spacing?.padding?.top.indexOf("var:preset")){const a=e.spacing.padding.top.split("|")[2];t.paddingTop="var(--wp--preset--spacing--"+a+")"}else t.paddingTop=e.spacing.padding.top;if(e?.spacing?.padding?.right)if(-1!==e?.spacing?.padding?.right.indexOf("var:preset")){const a=e.spacing.padding.right.split("|")[2];t.paddingRight="var(--wp--preset--spacing--"+a+")"}else t.paddingRight=e.spacing.padding.right;if(e?.spacing?.padding?.bottom)if(-1!==e?.spacing?.padding?.bottom.indexOf("var:preset")){const a=e.spacing.padding.bottom.split("|")[2];t.paddingBottom="var(--wp--preset--spacing--"+a+")"}else t.paddingBottom=e.spacing.padding.bottom;if(e?.spacing?.padding?.left)if(-1!==e?.spacing?.padding?.left.indexOf("var:preset")){const a=e.spacing.padding.left.split("|")[2];t.paddingLeft="var(--wp--preset--spacing--"+a+")"}else t.paddingLeft=e.spacing.padding.left}return t})(E),x=(e=>{const t={};return e?.aspectRatioMobile&&(t["--sht-teaser-cover-aspect-ratio"]=e.aspectRatioMobile),e?.aspectRatioTablet&&(t["--sht-teaser-cover-aspect-ratio--tablet"]=e.aspectRatioTablet),e?.aspectRatioDesktop&&(t["--sht-teaser-cover-aspect-ratio--desktop"]=e.aspectRatioDesktop),e?.aspectRatioLargeDesktop&&(t["--sht-teaser-cover-aspect-ratio--large-desktop"]=e.aspectRatioLargeDesktop),e?.aspectRatioXLargeDesktop&&(t["--sht-teaser-cover-aspect-ratio--xlarge-desktop"]=e.aspectRatioXLargeDesktop),t})(o),y=(0,t.useBlockProps)({style:x,className:b?"is-style-inner-constraint":""}),N=(0,l.useSelect)(e=>e("core").getEntityRecord("postType","page",k)),P=(0,l.useSelect)(e=>e("core/editor").getEditorSettings().imageSizes),L=(0,l.useSelect)(e=>e("core").getEntityRecords("postType","page",{per_page:-1,order:"asc",orderby:"title"})),B=[{label:"Select a page",value:0}];return L?.length&&L.forEach(e=>{B.push({label:e.title.rendered,value:e.id})}),React.createElement(React.Fragment,null,React.createElement(t.InspectorControls,null,React.createElement(a.PanelBody,{title:(0,s._x)("Settings","Block settings","pt-must-use")},React.createElement(a.PanelRow,null,!L?.length&&React.createElement(a.Spinner,null),!!L?.length&&React.createElement(a.SelectControl,{label:(0,s._x)("Choose page","Block setting","pt-must-use"),value:k,options:B,onChange:e=>c({postId:e})})),React.createElement(a.PanelRow,null,React.createElement(a.ToggleControl,{label:(0,s._x)("Constrain content width","Block setting","pt-must-use"),checked:!!b,onChange:()=>c({innerConstraint:!b})})),!!P?.length&&React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Image size","Block setting","pt-must-use"),value:_,options:P.map(e=>({label:e.name,value:e.slug})),onChange:e=>c({imageSize:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Aspect ratio (XL)","SelectControl label","pt-must-use"),value:u,options:v,onChange:e=>c({aspectRatioXLargeDesktop:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Aspect ratio (L)","SelectControl label","pt-must-use"),value:m,options:v,onChange:e=>c({aspectRatioLargeDesktop:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Aspect ratio (Desktop)","SelectControl label","pt-must-use"),value:d,options:v,onChange:e=>c({aspectRatioDesktop:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Aspect ratio (Laptop)","SelectControl label","pt-must-use"),value:g,options:v,onChange:e=>c({aspectRatioLaptop:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Aspect ratio (Tablet)","SelectControl label","pt-must-use"),value:r,options:v,onChange:e=>c({aspectRatioTablet:e})})),React.createElement(a.PanelRow,null,React.createElement(a.SelectControl,{label:(0,s._x)("Aspect ratio (Mobile)","SelectControl label","pt-must-use"),value:p,options:v,onChange:e=>c({aspectRatioMobile:e})})),k&&N&&N?.featured_image?.media_details?.sizes[_]?.source_url&&React.createElement(a.PanelRow,null,React.createElement(a.FocalPointPicker,{label:(0,s._x)("Image focal point","Block setting","pt-must-use"),url:N.featured_image.media_details.sizes[_].source_url,value:R,onChange:e=>c({focalPoint:e})})))),React.createElement("div",y,!k&&React.createElement("div",{className:"c-editormessage"},(0,s._x)("No page selected","Block placeholder","pt-must-use")),!!k&&!N&&React.createElement("div",{className:"c-editormessage"},React.createElement("div",{className:"c-editormessage__row"},React.createElement(a.Spinner,null),React.createElement("span",null,(0,s._x)("Loading page data...","Block placeholder","pt-must-use")))),N&&React.createElement("div",{className:`${i}__inner`,style:C},React.createElement("div",{className:`${i}__content`,style:S},React.createElement("h2",{className:`${i}__title`},N.title.rendered),N.excerpt.rendered&&React.createElement("div",{className:`${i}__excerpt`,dangerouslySetInnerHTML:{__html:N.excerpt.rendered}}),React.createElement("div",{className:`${i}__link-wrapper wp-block-button is-style-with-arrow-right has-smaller-font-size`},React.createElement(t.RichText,{placeholder:(0,s._x)("Add link textâ€¦","Block placeholder","pt-must-use"),tagName:"div",className:`${i}__link wp-block-button__link has-transparent-background-color has-background wp-element-button`,value:h,onChange:e=>c({linkText:e})}))),React.createElement(n,{props:{classNameBase:i,postId:k,pageData:N,imageSize:_,focalPoint:R}}))))}})})();
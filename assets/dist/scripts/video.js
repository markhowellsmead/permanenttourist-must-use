(()=>{const t=document.querySelectorAll(".wp-block-video video");t.length&&t.forEach(t=>{t.hasAttribute("poster")||((t,e)=>{const a=document.createElement("video");a.src=t,a.muted=!0,a.addEventListener("loadeddata",t=>{a.currentTime=20}),a.addEventListener("loadedmetadata",t=>{const e=a.duration;t.target.dataset.totalFrames=Math.floor(30*e)}),a.addEventListener("seeked",()=>{const t=document.createElement("canvas");t.width=a.videoWidth,t.height=a.videoHeight,t.getContext("2d").drawImage(a,0,0,t.width,t.height),e(t.toDataURL("image/jpeg"))}),a.load(),a.play()})(t.src,e=>{t.setAttribute("poster",e)})});const e=document.querySelectorAll(".wp-block-video .play-button, .wp-block-image .play-button, .shp-video-play-button");e.length&&e.forEach(t=>{t.addEventListener("click",t=>{if(window._paq){const e=t.currentTarget;if(e.dataset?.attributeUrl)return void window._paq.push(["trackEvent","Video","Play",e.dataset.attributeUrl]);const a=e.closest("[data-attribute-url]");return a&&a.dataset?.attributeUrl?void window._paq.push(["trackEvent","Video","Play",a.dataset.attributeUrl]):void 0}})})})();